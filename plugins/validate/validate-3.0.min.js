!function(a){"use strict";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.Validate=a()}(function(){"use strict";function a(a){this.util={isArray:function(a){return a&&"object"==typeof a&&a.constructor==Array},isString:function(a){return a&&"string"==typeof a&&a.constructor==String},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},isObject:function(a){return null!==a&&"object"==typeof a},isEmpty:function(a){if(null==a)return!0;if(this.util.isArray(a)||this.util.isString(a))return 0===a.length;for(var b in a)if(this.util.hasOwn(a,b))return!1;return!0}.bind(this),log:function(a){window.console&&this.defaults.debug&&window.console.log(a)}.bind(this),warn:function(a){window.console&&this.defaults.debug&&window.console.warn(a)}.bind(this),noop:function(){},trim:function(a){return a?a.replace(/^\s+/g,"").replace(/\s+$/g,""):a},extend:function(a,b){for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a},each:function(a,b){var c,d;if(a)if(c=0,a.length)for(d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)break}},this.rules={required:{method:function(a){return!this.util.isEmpty(a)}.bind(this),msg:"请输入内容"},match:{method:function(a,b){return a==this.defaults.container.querySelector("[name='"+b+"']").value}.bind(this),msg:"必须与原始密码一致"},number:{method:function(a){return/^\d+(.\d*)?$/.test(a)}.bind(this),msg:"请输入数字"},digits:{method:function(a){return/^\d+$/.test(a)}.bind(this),msg:"请输入整数"},mobile:{method:function(a){return/^0?1[3|4|5|7|8][0-9]\d{8,9}$/.test(a)}.bind(this),msg:"请填写正确的手机号码"},tel:{method:function(a){return/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,11})+$/.test(a)}.bind(this),msg:"请填写正确的电话号码"},email:{method:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}.bind(this),msg:"请填写正确的email地址"},zip:{method:function(a){return/^[1-9][0-9]{5}$/.test(a)}.bind(this),msg:"请填写正确的邮编"},date:{method:function(a,b){b=b||"-";var c=new RegExp("^[1|2]\\d{3}"+b+"[0-2][0-9]"+b+"[0-3][0-9]$");return c.test(a)}.bind(this),msg:"请填写正确的日期"},url:{method:function(a,b){var c=/(http|ftp|https):\/\/([\w-]+\.)+[\w-]+\.(com|net|cn|org|me|io|info|xxx)/;return/^http|ftp|https/.test(a)||(a=(b||"http://")+a),c.test(a)}.bind(this),msg:"请填写正确的网址"},minlength:{method:function(a,b){return a.length>=b}.bind(this),msg:"长度不能少于$0"},maxlength:{method:function(a,b){return a.length<=b}.bind(this),msg:"长度不能超过$0"}},this.defaults={el:"#app",container:null,debug:!0,success:this.util.noop,fail:this.util.noop},this.init=function(){this.util.isEmpty(a)||(this.util.isObject(a)||this.util.warn("form config must be an object"),this.defaults=this.util.extend(this.defaults,a)),this.defaults.container=document.querySelector(this.defaults.el),this.defaults.container.addEventListener("submit",function(){this.onsubmit()}.bind(this),!1)},this.setRule=function(a,b,c){var d=this.rules[a];d&&!b&&(b=d.method),this.rules[a]={method:b,msg:c}},this.onsubmit=function(){var c,a={},b=[],d=this,e=this.defaults.container.querySelectorAll("input, select, textarea");this.util.each(e,function(e,f){return a=d.update(f),a.hasError?(b.push(a.errorMsg),c=!0):void 0}),c?this.defaults.fail.call(this,b[0]):this.defaults.success.call(this)},this.update=function(a){var g,h,i,j,b=a.getAttribute("data-rules"),c=a.getAttribute("data-error"),d=!0,e={},f=0;for(b=/\|/.test(b)?b.split("|"):[b],c=/\|/.test(c)?c.split("|"):[c];f<b.length;f++)g=b[f],h="",/(=)/.test(g)&&(i=g.split("="),g=i[0],h=i[1]),this.rules[g]&&(j=this.rules[g].method(this.util.trim(a.value),h),d&&(d=j?!0:!1,e={hasError:!j,errorMsg:j?"验证通过":c[f]?c[f]:this.rules[g].msg.replace("$0",h)}));return e},this.init()}return a});