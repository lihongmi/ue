!function(a,b){"use strict";function d(a){if("undefined"==typeof a)throw Error("Picker配置不能为空");this.defaults={el:".ue-picker",type:"normal",showCover:!0,itemHeight:40,items:[],spaceNum:2,probeType:2,apart:"",show:"text","export":"value",onScrollEnd:function(){},onConfirm:function(){}},this.defaults=c.extend(this.defaults,a),this.picker="string"==typeof this.defaults.el?b.querySelector(this.defaults.el):this.defaults.el,this.pickerWrapper=this.picker.querySelector(".ue-picker-wrapper"),this.pickerCover=this.picker.querySelector(".ue-picker-cover"),this.pickerList=this.picker.querySelector(".ue-picker-list"),this._init()}var c={extend:function(a,b){for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a},each:function(a,b){var c,d;if(a)if(c=0,a.length)for(d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)break},tf:function(a){return(10>a?"0":"")+a}};d.prototype.hide=function(){this.pickerCover.style.display="none",this.pickerWrapper.style.opacity=0,this.pickerWrapper.style.webkitTransform="translate3d(0, "+this.pickerWrapper.clientHeight+"px, 0)",this.pickerWrapper.style.transform="translate3d(0, "+this.pickerWrapper.clientHeight+"px, 0)";var a=this;setTimeout(function(){c.each(a.pickerScroll,function(b,c){c.scrollTo(0,0),a.scrollIndex[b]=0,a._switchActiveClass(b,0)})},500)},d.prototype.show=function(){this.defaults.showCover&&(this.pickerCover.style.display="block"),this.pickerWrapper.style.opacity=1,this.pickerWrapper.style.webkitTransition="all ease-in-out 0.5s",this.pickerWrapper.style.transition="all ease-in-out 0.5s",this.pickerWrapper.style.webkitTransform="translate3d(0, 0, 0)",this.pickerWrapper.style.transform="translate3d(0, 0, 0)"},d.prototype.update=function(a){a&&(this.defaults=c.extend(this.defaults,a)),this._createFlex(),this._scrollIndexInit(),this._createPickerScroll()},d.prototype._init=function(){this.update(),this._bindEvent(),this.hide()},d.prototype._createPickerScroll=function(){var a,b,d,e,f;this.pickerScroll={},a=this.picker.querySelectorAll(".ue-picker-list-flex"),b=this,d=function(a,c){var d=-Math.round(c/b.defaults.itemHeight),e=b.defaults.items[a].values.length-1;return d>e&&(d=e),0>=d&&(d=0),d},e=function(a){var c=d(a,b.pickerScroll[a].y);b._switchActiveClass(a,c),b.scrollIndex[a]=c,b.defaults.onScrollEnd(b._scrollEndData())},f=function(a){var c=d(a,b.pickerScroll[a].y);b._switchActiveClass(a,c)},c.each(a,function(a,c){b.pickerScroll[a]=new IScroll(c,{probeType:b.defaults.probeType,snap:"li"}),b.pickerScroll[a].on("scrollEnd",function(){e(a)}),b.pickerScroll[a].on("scroll",function(){f(a)})})},d.prototype._scrollIndexInit=function(){this.scrollIndex=[];for(var a=0;a<this.defaults.items.length;a++)this.scrollIndex.push(0)},d.prototype._scrollData=function(a,b){var d=this.defaults.items[a].values[b][this.defaults.export];return"date"==this.defaults.type&&"number"==typeof d&&(d=c.tf(d)),d},d.prototype._scrollEndData=function(){for(var d,a="",b=this.defaults.items.length,c=0;b>c;c++)d=this.defaults.items[c].values[this.scrollIndex[c]][this.defaults.export],a+=this._scrollData(c,this.scrollIndex[c])+(c==b-1||""==d?"":this.defaults.apart);return a},d.prototype._bindEvent=function(){b.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.picker.querySelector(".ue-picker-cancel").addEventListener("touchstart",function(){this.hide()}.bind(this),!1),this.picker.querySelector(".ue-picker-confirm").addEventListener("touchstart",function(){this.hide(),this.defaults.onConfirm(this._scrollEndData())}.bind(this),!1),this.pickerCover.addEventListener("touchstart",function(){this.hide()}.bind(this),!1)},d.prototype._createSpace=function(){for(var a="",b=0;b<this.defaults.spaceNum;b++)a+='<li class="ue-picker-item"></li>';return a},d.prototype._createItem=function(a){for(var e,b="",d=0;d<this.defaults.items[a]["values"].length;d++)e=this.defaults.items[a]["values"][d][this.defaults.show],"date"==this.defaults.type&&"number"==typeof e&&(e=c.tf(e)),b+='<li class="ue-picker-item">'+e+"</li>";return b},d.prototype._createFlex=function(){var c,d,a=0;for(this.pickerItems={},this.pickerList.innerHTML="";a<this.defaults.items.length;a++){for(c=b.createElement("div"),c.className="ue-picker-list-flex",c.innerHTML="<ul>"+this._createSpace()+this._createItem(a)+this._createSpace()+"</ul>",this.pickerList.appendChild(c),this.pickerItems[a]=c.querySelectorAll(".ue-picker-item"),this.pickerItems[a][this.defaults.spaceNum].classList.add("ue-picker-active"),d=0;d<this.pickerItems[a].length;d++)this.pickerItems[a][d].style.height=this.pickerItems[a][d].style.lineHeight=this.defaults.itemHeight+"px";this._indicatorInit()}},d.prototype._indicatorInit=function(){this.pickerIndicator=this.pickerWrapper.querySelector(".ue-picker-indicator"),this.pickerIndicator.style.height=this.defaults.itemHeight+"px",this.pickerList.style.height=(2*this.defaults.spaceNum+1)*this.defaults.itemHeight+"px"},d.prototype._switchActiveClass=function(a,b){for(var c=this.pickerItems[a],d=0;d<c.length;d++)c[d].classList.remove("ue-picker-active");c[b+this.defaults.spaceNum].classList.add("ue-picker-active")},"object"==typeof exports?module.exports=d:"function"==typeof define&&define.amd?define([],function(){return d}):a.Picker=d}(window,document);